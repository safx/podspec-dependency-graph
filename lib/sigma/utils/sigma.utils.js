(function(t){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";var i=this;sigma.utils=sigma.utils||{},sigma.utils.extend=function(){var t,i,r={},a=arguments.length;for(t=a-1;t>=0;t--)for(i in arguments[t])r[i]=arguments[t][i];return r},sigma.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()},sigma.utils.pkg=function(t){return(t||"").split(".").reduce(function(t,i){return i in t?t[i]:t[i]={}},i)},sigma.utils.id=function(){var t=0;return function(){return++t}}(),sigma.utils.floatColor=function(t){var i=[0,0,0];return t.match(/^#/)?(t=(t||"").replace(/^#/,""),i=3===t.length?[parseInt(t.charAt(0)+t.charAt(0),16),parseInt(t.charAt(1)+t.charAt(1),16),parseInt(t.charAt(2)+t.charAt(2),16)]:[parseInt(t.charAt(0)+t.charAt(1),16),parseInt(t.charAt(2)+t.charAt(3),16),parseInt(t.charAt(4)+t.charAt(5),16)]):t.match(/^ *rgba? *\(/)&&(t=t.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/),i=[+t[1],+t[2],+t[3]]),256*i[0]*256+256*i[1]+i[2]},sigma.utils.getX=function(i){return i.offsetX!==t&&i.offsetX||i.layerX!==t&&i.layerX||i.clientX!==t&&i.clientX},sigma.utils.getY=function(i){return i.offsetY!==t&&i.offsetY||i.layerY!==t&&i.layerY||i.clientY!==t&&i.clientY},sigma.utils.getDelta=function(i){return i.wheelDelta!==t&&i.wheelDelta||i.detail!==t&&-i.detail},sigma.utils.getOffset=function(t){for(var i=0,r=0;t;)r+=parseInt(t.offsetTop),i+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:r,left:i}},sigma.utils.doubleClick=function(t,i,r){var a=0;t.addEventListener(i,function(t){return a++,2===a?(a=0,r(t)):void(1===a&&setTimeout(function(){a=0},sigma.settings.doubleClickTimeout))},!1)},sigma.utils.easings=sigma.utils.easings||{},sigma.utils.easings.linearNone=function(t){return t},sigma.utils.easings.quadraticIn=function(t){return t*t},sigma.utils.easings.quadraticOut=function(t){return t*(2-t)},sigma.utils.easings.quadraticInOut=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},sigma.utils.easings.cubicIn=function(t){return t*t*t},sigma.utils.easings.cubicOut=function(t){return--t*t*t+1},sigma.utils.easings.cubicInOut=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},sigma.utils.loadShader=function(t,i,r,a){var e,n=t.createShader(r);return t.shaderSource(n,i),t.compileShader(n),e=t.getShaderParameter(n,t.COMPILE_STATUS),e?n:(a&&a('Error compiling shader "'+n+'":'+t.getShaderInfoLog(n)),t.deleteShader(n),null)},sigma.utils.loadProgram=function(t,i,r,a,e){var n,s,u=t.createProgram();for(n=0;n<i.length;++n)t.attachShader(u,i[n]);if(r)for(n=0;n<r.length;++n)t.bindAttribLocation(u,locations?locations[n]:n,opt_attribs[n]);return t.linkProgram(u),s=t.getProgramParameter(u,t.LINK_STATUS),s?u:(e&&e("Error in program linking: "+t.getProgramInfoLog(u)),t.deleteProgram(u),null)},sigma.utils.pkg("sigma.utils.matrices"),sigma.utils.matrices.translation=function(t,i){return[1,0,0,0,1,0,t,i,1]},sigma.utils.matrices.rotation=function(t,i){var r=Math.cos(t),a=Math.sin(t);return i?[r,-a,a,r]:[r,-a,0,a,r,0,0,0,1]},sigma.utils.matrices.scale=function(t,i){return i?[t,0,0,t]:[t,0,0,0,t,0,0,0,1]},sigma.utils.matrices.multiply=function(t,i,r){var a=r?2:3,e=t[0*a+0],n=t[0*a+1],s=t[0*a+2],u=t[1*a+0],o=t[1*a+1],c=t[1*a+2],l=t[2*a+0],g=t[2*a+1],f=t[2*a+2],m=i[0*a+0],h=i[0*a+1],d=i[0*a+2],p=i[1*a+0],I=i[1*a+1],A=i[1*a+2],v=i[2*a+0],S=i[2*a+1],b=i[2*a+2];return r?[e*m+n*p,e*h+n*I,u*m+o*p,u*h+o*I]:[e*m+n*p+s*v,e*h+n*I+s*S,e*d+n*A+s*b,u*m+o*p+c*v,u*h+o*I+c*S,u*d+o*A+c*b,l*m+g*p+f*v,l*h+g*I+f*S,l*d+g*A+f*b]}}).call(this);