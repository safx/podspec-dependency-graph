(function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.utils.pkg("sigma.utils"),sigma.middlewares.rescale=function(e,i,a){var m,t,s,n,d,g,h,x,o=this.graph.nodes(),z=this.graph.edges(),M=this.settings.embedObjects(a||{}),r=M("bounds")||sigma.utils.getBoundaries(this.graph,e,!0),l=r.minX,S=r.minY,u=r.maxX,c=r.maxY,f=r.sizeMax,N=r.weightMax,E=M("width")||1,p=M("height")||1;for(h="outside"===M("scalingMode")?Math.max(E/Math.max(u-l,1),p/Math.max(c-S,1)):Math.min(E/Math.max(u-l,1),p/Math.max(c-S,1)),x=(M("rescaleIgnoreSize")?0:(M("maxNodeSize")||f)/h)+(M("sideMargin")||0),u+=x,l-=x,c+=x,S-=x,h="outside"===M("scalingMode")?Math.max(E/Math.max(u-l,1),p/Math.max(c-S,1)):Math.min(E/Math.max(u-l,1),p/Math.max(c-S,1)),M("maxNodeSize")||M("minNodeSize")?M("maxNodeSize")===M("minNodeSize")?(s=0,n=M("maxNodeSize")):(s=(M("maxNodeSize")-M("minNodeSize"))/f,n=M("minNodeSize")):(s=1,n=0),M("maxEdgeSize")||M("minEdgeSize")?M("maxEdgeSize")===M("minEdgeSize")?(d=0,g=M("minEdgeSize")):(d=(M("maxEdgeSize")-M("minEdgeSize"))/N,g=M("minEdgeSize")):(d=1,g=0),m=0,t=z.length;t>m;m++)z[m][i+"size"]=z[m][e+"size"]*d+g;for(m=0,t=o.length;t>m;m++)o[m][i+"size"]=o[m][e+"size"]*s+n,o[m][i+"x"]=(o[m][e+"x"]-(u+l)/2)*h,o[m][i+"y"]=(o[m][e+"y"]-(c+S)/2)*h},sigma.utils.getBoundaries=function(e,i,a){var m,t,s=e.edges(),n=e.nodes(),d=-1/0,g=-1/0,h=1/0,x=1/0,o=-1/0,z=-1/0;if(a)for(m=0,t=s.length;t>m;m++)d=Math.max(s[m][i+"size"],d);for(m=0,t=n.length;t>m;m++)g=Math.max(n[m][i+"size"],g),o=Math.max(n[m][i+"x"],o),h=Math.min(n[m][i+"x"],h),z=Math.max(n[m][i+"y"],z),x=Math.min(n[m][i+"y"],x);return d=d||1,g=g||1,{weightMax:d,sizeMax:g,minX:h,minY:x,maxX:o,maxY:z}}}).call(this);