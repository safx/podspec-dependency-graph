!function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(o,t,i,r,a){t[i++]=o[r+"x"],t[i++]=o[r+"y"],t[i++]=o[r+"size"],t[i++]=sigma.utils.floatColor(o.color||a("defaultNodeColor"))},render:function(o,t,i,r){var a,e=o.getAttribLocation(t,"a_position"),n=o.getAttribLocation(t,"a_size"),l=o.getAttribLocation(t,"a_color"),c=o.getUniformLocation(t,"u_resolution"),u=o.getUniformLocation(t,"u_matrix"),s=o.getUniformLocation(t,"u_ratio"),f=o.getUniformLocation(t,"u_scale");a=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,a),o.bufferData(o.ARRAY_BUFFER,i,o.DYNAMIC_DRAW),o.uniform2f(c,r.width,r.height),o.uniform1f(s,1/Math.pow(r.ratio,r.settings("nodesPowRatio"))),o.uniform1f(f,r.scalingRatio),o.uniformMatrix3fv(u,!1,r.matrix),o.enableVertexAttribArray(e),o.enableVertexAttribArray(n),o.enableVertexAttribArray(l),o.vertexAttribPointer(e,2,o.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),o.vertexAttribPointer(n,1,o.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),o.vertexAttribPointer(l,1,o.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),o.drawArrays(o.POINTS,r.start||0,r.count||i.length/this.ATTRIBUTES)},initProgram:function(o){var t,i,r;return t=sigma.utils.loadShader(o,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),o.VERTEX_SHADER),i=sigma.utils.loadShader(o,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),o.FRAGMENT_SHADER),r=sigma.utils.loadProgram(o,[t,i])}}}();