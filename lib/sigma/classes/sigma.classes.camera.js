(function(t){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.classes"),sigma.classes.camera=function(t,i,s,a){sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"graph",{value:i}),Object.defineProperty(this,"id",{value:t}),Object.defineProperty(this,"readPrefix",{value:"read_cam"+t+":"}),Object.defineProperty(this,"prefix",{value:"cam"+t+":"}),this.x=0,this.y=0,this.ratio=1,this.angle=0,this.isAnimated=!1,this.settings="object"==typeof a&&a?s.embedObject(a):s},sigma.classes.camera.prototype.goTo=function(i){if(!this.settings("enableCamera"))return this;var s,a,e=i||{},r=["x","y","ratio","angle"];for(s=0,a=r.length;a>s;s++)if(e[r[s]]!==t){if("number"!=typeof e[r[s]]||isNaN(e[r[s]]))throw'Value for "'+r[s]+'" is not a number.';this[r[s]]=e[r[s]]}return this.dispatchEvent("coordinatesUpdated"),this},sigma.classes.camera.prototype.applyView=function(i,s,a){a=a||{},s=s!==t?s:this.prefix,i=i!==t?i:this.readPrefix;var e,r,h,o=a.nodes||this.graph.nodes(),n=a.edges||this.graph.edges(),c=Math.cos(this.angle),g=Math.sin(this.angle);for(e=0,r=o.length;r>e;e++)h=o[e],h[s+"x"]=(((h[i+"x"]||0)-this.x)*c+((h[i+"y"]||0)-this.y)*g)/this.ratio+(a.width||0)/2,h[s+"y"]=(((h[i+"y"]||0)-this.y)*c-((h[i+"x"]||0)-this.x)*g)/this.ratio+(a.height||0)/2,h[s+"size"]=(h[i+"size"]||0)/Math.pow(this.ratio,this.settings("nodesPowRatio"));for(e=0,r=n.length;r>e;e++)n[e][s+"size"]=(n[e][i+"size"]||0)/Math.pow(this.ratio,this.settings("edgesPowRatio"));return this},sigma.classes.camera.prototype.graphPosition=function(t,i,s){var a=0,e=0,r=Math.cos(this.angle),h=Math.sin(this.angle);return s||(a=-(this.x*r+this.y*h)/this.ratio,e=-(this.y*r-this.x*h)/this.ratio),{x:(t*r+i*h)/this.ratio+a,y:(i*r-t*h)/this.ratio+e}},sigma.classes.camera.prototype.cameraPosition=function(t,i,s){var a=0,e=0,r=Math.cos(this.angle),h=Math.sin(this.angle);return s||(a=-(this.x*r+this.y*h)/this.ratio,e=-(this.y*r-this.x*h)/this.ratio),{x:((t-a)*r-(i-e)*h)*this.ratio,y:((i-e)*r+(t-a)*h)*this.ratio}},sigma.classes.camera.prototype.getMatrix=function(){var t=sigma.utils.matrices.scale(1/this.ratio),i=sigma.utils.matrices.rotation(this.angle),s=sigma.utils.matrices.translation(-this.x,-this.y),a=sigma.utils.matrices.multiply(s,sigma.utils.matrices.multiply(i,t));return a},sigma.classes.camera.prototype.getRectangle=function(t,i){var s=this.cameraPosition(t,0,!0),a=this.cameraPosition(0,i,!0),e=this.cameraPosition(t/2,i/2,!0),r=this.cameraPosition(t/4,0,!0).x,h=this.cameraPosition(0,i/4,!0).y;return{x1:this.x-e.x-r,y1:this.y-e.y-h,x2:this.x-e.x+r+s.x,y2:this.y-e.y-h+s.y,height:Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y+2*h,2))}}}).call(this);