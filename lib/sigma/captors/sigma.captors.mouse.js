(function(){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.mouse=function(t,i,a){function e(t){var i,a,e;return M("mouseEnabled")&&y.dispatchEvent("mousemove",{x:sigma.utils.getX(t)-t.target.width/2,y:sigma.utils.getY(t)-t.target.height/2}),M("mouseEnabled")&&p?(x=!0,f&&clearTimeout(f),f=setTimeout(function(){x=!1},M("dragTimeout")),sigma.misc.animation.killAll(D),D.isMoving=!0,e=D.cameraPosition(sigma.utils.getX(t)-h,sigma.utils.getY(t)-v,!0),i=g-e.x,a=l-e.y,(i!==D.x||a!==D.y)&&(d=D.x,c=D.y,D.goTo({x:i,y:a})),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1):void 0}function o(t){if(M("mouseEnabled")&&p){p=!1,f&&clearTimeout(f),D.isMoving=!1;var i=sigma.utils.getX(t),a=sigma.utils.getY(t);x?(sigma.misc.animation.killAll(D),sigma.misc.animation.camera(D,{x:D.x+M("mouseInertiaRatio")*(D.x-d),y:D.y+M("mouseInertiaRatio")*(D.y-c)},{easing:"quadraticOut",duration:M("mouseInertiaDuration")})):(h!==i||v!==a)&&D.goTo({x:D.x,y:D.y}),y.dispatchEvent("mouseup",{x:i-t.target.width/2,y:a-t.target.height/2}),x=!1}}function n(t){M("mouseEnabled")&&(p=!0,g=D.x,l=D.y,d=D.x,c=D.y,h=sigma.utils.getX(t),v=sigma.utils.getY(t),y.dispatchEvent("mouseup",{x:h-t.target.width/2,y:v-t.target.height/2}))}function s(){M("mouseEnabled")&&y.dispatchEvent("mouseout")}function u(t){return M("mouseEnabled")&&y.dispatchEvent("click",{x:sigma.utils.getX(t)-t.target.width/2,y:sigma.utils.getY(t)-t.target.height/2}),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1}function m(t){var i,a,e,o;return M("mouseEnabled")?(e=1/M("doubleClickZoomingRatio"),o=Math.max(M("zoomMin"),Math.min(M("zoomMax"),D.ratio*e)),e=o/D.ratio,o!==D.ratio&&(a=sigma.misc.animation.killAll(D),i=D.cameraPosition(sigma.utils.getX(t)-t.target.width/2,sigma.utils.getY(t)-t.target.height/2,!0),sigma.misc.animation.camera(D,{x:i.x*(1-e)+D.x,y:i.y*(1-e)+D.y,ratio:o},{easing:a?"quadraticOut":"quadraticInOut",duration:M("doubleClickZoomDuration")})),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1):void 0}function r(t){var i,a,e,o;return M("mouseEnabled")?(e=sigma.utils.getDelta(t)>0?1/M("zoomingRatio"):M("zoomingRatio"),o=Math.max(M("zoomMin"),Math.min(M("zoomMax"),D.ratio*e)),e=o/D.ratio,o!==D.ratio&&(a=sigma.misc.animation.killAll(D),i=D.cameraPosition(sigma.utils.getX(t)-t.target.width/2,sigma.utils.getY(t)-t.target.height/2,!0),sigma.misc.animation.camera(D,{x:i.x*(1-e)+D.x,y:i.y*(1-e)+D.y,ratio:o},{easing:a?"quadraticOut":"quadraticInOut",duration:M("mouseZoomDuration")})),t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation(),!1):void 0}var g,l,d,c,h,v,p,x,f,y=this,E=t,D=i,M=a;sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(E,"click",m),E.addEventListener("DOMMouseScroll",r,!1),E.addEventListener("mousewheel",r,!1),E.addEventListener("mousemove",e,!1),E.addEventListener("mousedown",n,!1),E.addEventListener("click",u,!1),E.addEventListener("mouseout",s,!1),document.addEventListener("mouseup",o,!1)}}).call(this);